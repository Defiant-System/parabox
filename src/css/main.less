
content {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	// background: rgba(#000,.15);

	.board {
		position: absolute;
		font-size: 0;
		padding: 1px 0 0 1px;
		--bg-color: rgba(#248,.5);
		--fg-filter: none;
		--w: 7;
		--h: 7;
		--y: 1;
		--x: 1;
		--bR: 8px;
		--t: 9px;
		--c: 61px;

		&.box {
			background: var( --bg-color );
			width: calc( var( --c ) * var( --w ) );
			height: calc( calc( var( --c ) * var( --h ) ) + 6px );
			box-shadow: inset 0px -7px 0px 0px rgba(#000,.175),
						0 0 7px rgba(#000,.35);

			&.size-5 { top: 165px; left: 165px; }
			&.size-7 { top: 115px; left: 115px; }
			&.size-9 { top: 55px; left: 55px; }

			&:before {
				opacity: .25;
				top: 9px;
				border-top: 1px solid rgba(#000,.75);
				box-shadow: 0px -7px 0px 0px rgba(#000,.25);
				background-image: radial-gradient(ellipse at bottom center, rgba(#fff,.8), transparent);
				// background-image: radial-gradient(ellipse at bottom center, rgba(#fff,.8), transparent),
				// 					repeating-linear-gradient(0deg, transparent 0, transparent calc( var( --c ) - 1px ), #111 calc( var( --c ) - 1px ), #111 var( --c )),
				// 					repeating-linear-gradient(90deg, transparent 0, transparent calc( var( --c ) - 1px ), #111 calc( var( --c ) - 1px ), #111 var( --c ));
			}

			&:after {
				opacity: .35;
			}
		}

		> div {
			position: absolute;
			top: calc( calc( var( --y ) * var( --c ) ) - 14px );
			left: calc( calc( var( --x ) * var( --c ) ) - 1px );

			// &.player { display: none; }
			// &.box:not(.player) { display: none; }
			// &.exit,
			// &.void { display: none; }
		}

		> span {
			// &.wall { display: none; }
		}
	}

	.box {
		z-index: var( --y );
		width: calc( var( --c ) - 2px );
		height: calc( var( --c ) + 6px );
		background: var( --color );
		box-shadow: inset 0px -7px 0px 0px rgba(#000,.175),
					// 0 0 9px rgba(#000,.35),
					inset 0 0 1px rgba(#fff,.5);
		border-radius: var( --bR );
		border: 2px solid rgba(#000,.65);

		&.blue   { --color: #17b; }
		&.yellow { --color: #c70; }
		&.brown  { --color: #950; }
		&.red    { --color: #b33; }
		&.green  { --color: #171; }

		&[data-id] { transition: all 250ms ease-in-out; }

		&:before {
			content: "";
			background-image: radial-gradient(ellipse at bottom center, rgba(#fff,.8), transparent);
			position: absolute;
			top: 7px;
			left: 0;
			right: 0;
			bottom: 7px;
			border-radius: inherit;
			border-top: 1px solid rgba(#111,.4);
			pointer-events: none;
			mix-blend-mode: soft-light;
		}

		&:after {
			content: "";
			background-image: linear-gradient(90deg, transparent, rgba(#fff,.65), transparent);
			position: absolute;
			left: 7px;
			right: 7px;
			bottom: 7px;
			height: 1px;
			mix-blend-mode: soft-light;
			pointer-events: none;
		}
	}

	div.player {
		--color: #9d02bd;
		// z-index: calc( var( --y ) + 1 );
		transition: all 260ms ease-in-out;
		will-change: transform, top, left;

		&.go-right { animation: go-right 300ms ease-in-out; }
		&.go-left  { animation: go-left 300ms ease-in-out; }
		&.go-up    { animation: go-up 300ms ease-in-out; }
		&.go-down  { animation: go-down 300ms ease-in-out; }

		i {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			pointer-events: none;

			&:before,
			&:after {
				content: "";
				position: absolute;
				top: 17px;
				width: 11px;
				height: 11px;
				border-radius: 11px;
				background: rgba(#000,.6);
			}

			&:before {
				left: 11px;
				animation: wink 6s ease-in-out infinite,
							vert-left 19s ease-in-out infinite,
							hori 17s ease-in-out infinite;
			}

			&:after {
				right: 11px;
				animation: wink 6s ease-in-out infinite,
							vert-right 19s ease-in-out infinite,
							hori 17s ease-in-out infinite;
			}
		}
	}

	div.exit,
	div.void {
		top: calc( calc( var( --y ) * var( --c ) ) - 2px );
		left: calc( calc( var( --x ) * var( --c ) ) + 4px );
		height: calc( var( --c ) - 10px );
		width: calc( var( --c ) - 10px );
		border-radius: 9px;
		border: 4px solid rgba(#000,.35);

		&:before,
		&:after {
			content: "";
			background-image: linear-gradient(90deg, transparent, rgba(#fff,.15), transparent);
			position: absolute;
			left: 7px;
			right: 7px;
			top: 0;
			height: 1px;
		}

		&:after {
			top: auto;
			left: 0;
			right: 0;
			bottom: -5px;
		}
	}

	.exit i {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		pointer-events: none;

		&:before,
		&:after {
			content: "";
			position: absolute;
			top: 13px;
			left: 8px;
			width: 9px;
			height: 9px;
			border-radius: 7px;
			background: rgba(#000,.35);
			box-shadow: 0 1px 0 rgba(#fff,.125);
		}

		&:after {
			left: auto;
			right: 8px;
		}
	}

	span.wall {
		position: absolute;
		top: calc( calc( var( --y ) * calc( var( --c ) ) - 2px ) - 12px );
		left: calc( var( --x ) * calc( var( --c ) ) - 2px );
		width: var( --c );
		height: var( --c );
		z-index: var( --y );
		background: #999;
		// opacity: .65;
		// backdrop-filter: blur(7px);
		border: 2px solid rgba(#000,.95);
		filter: var( --fg-filter );
		// filter: sepia(1) hue-rotate(85deg) saturate(1.5) brightness(.75);

		&:after {
			content: "";
			position: absolute;
			top: 9px;
			left: 0;
			right: 0;
			bottom: 9px;
			border-radius: inherit;
			mix-blend-mode: soft-light;
			pointer-events: none;
		}
		
		// north east
		&.NE {
			border-width: 2px 0 0 2px;
			border-radius: var( --bR ) 0 0 0;

			&:after {
				border-top: 1px solid rgba(#000,.35);
				box-shadow: 0px -9px 0px 0px rgba(#000,.2);
			}
		}

		// north
		&.N {
			border-width: 2px 0 0 0;
			border-radius: 0;

			&:after {
				border-top: 1px solid rgba(#000,.35);
				box-shadow: 0px -9px 0px 0px rgba(#000,.2);
			}
		}

		// north west
		&.NW {
			border-width: 2px 2px 0 0;
			border-radius: 0 var( --bR ) 0 0;

			&:after {
				border-top: 1px solid rgba(#000,.35);
				box-shadow: 0px -9px 0px 0px rgba(#000,.2);
			}
		}

		// north south east
		&.NSE {
			height: calc( var( --c ) + 6px );
			border-width: 2px 0 2px 2px;
			border-radius: var( --bR ) 0 0 var( --bR );
			box-shadow: inset 0px -9px 0px 0px rgba(#000,.175);

			&:after {
				border-top: 1px solid rgba(#000,.35);
				border-bottom: 1px solid rgba(#fff,.45);
				box-shadow: 0px -9px 0px 0px rgba(#000,.2);
			}
		}

		// north south
		&.NS {
			height: calc( var( --c ) + 6px );
			border-width: 2px 0 2px 0;
			border-radius: 0;
			box-shadow: inset 0px -9px 0px 0px rgba(#000,.175);

			&:after {
				border-top: 1px solid rgba(#000,.35);
				border-bottom: 1px solid rgba(#fff,.45);
				box-shadow: 0px -9px 0px 0px rgba(#000,.2);
			}
		}

		// north west south
		&.NWS {
			height: calc( var( --c ) + 6px );
			border-width: 2px 2px 2px 0;
			border-radius: 0 var( --bR ) var( --bR ) 0;
			box-shadow: inset 0px -9px 0px 0px rgba(#000,.175);

			&:after {
				border-top: 1px solid rgba(#000,.35);
				border-bottom: 1px solid rgba(#fff,.45);
				box-shadow: 0px -9px 0px 0px rgba(#000,.2);
			}
		}

		// north west south east
		&.NWSE {
			height: calc( var( --c ) + 6px );
			border-width: 2px;
			border-radius: var( --bR );
			box-shadow: inset 0px -9px 0px 0px rgba(#000,.175);

			&:after {
				border-top: 1px solid rgba(#000,.35);
				border-bottom: 1px solid rgba(#fff,.45);
				box-shadow: 0px -9px 0px 0px rgba(#000,.2);
			}
		}

		// north west east
		&.NWE {
			border-width: 2px 2px 0 2px;
			border-radius: var( --bR ) var( --bR ) 0 0;

			&:after {
				border-top: 1px solid rgba(#000,.35);
				box-shadow: 0px -9px 0px 0px rgba(#000,.2);
			}
		}

		// full
		&.F {
			border-width: 0;
			border-radius: 0;
		}

		// east
		&.E {
			border-width: 0 0 0 2px;
			border-radius: 0;
		}

		// west
		&.W {
			border-width: 0 2px 0 0;
			border-radius: 0;
		}

		// west east
		&.WE {
			border-width: 0 2px 0 2px;
			border-radius: 0;
		}

		// west south east
		&.WSE {
			height: calc( var( --c ) + 6px );
			border-width: 0 2px 2px 2px;
			border-radius: 0 0 var( --bR ) var( --bR );
			box-shadow: inset 0px -9px 0px 0px rgba(#000,.175);

			&:after { border-bottom: 1px solid rgba(#fff,.45); }
		}

		// south
		&.S {
			height: calc( var( --c ) + 6px );
			border-width: 0 0 2px 0;
			border-radius: 0;
			box-shadow: inset 0px -9px 0px 0px rgba(#000,.175);

			&:after { border-bottom: 1px solid rgba(#fff,.45); }
		}

		// south east
		&.SE {
			height: calc( var( --c ) + 6px );
			border-width: 0 0 2px 2px;
			border-radius: 0 0 0 var( --bR );
			box-shadow: inset 0px -9px 0px 0px rgba(#000,.175);

			&:after { border-bottom: 1px solid rgba(#fff,.45); }
		}

		// west south
		&.WS {
			height: calc( var( --c ) + 6px );
			border-width: 0 2px 2px 0;
			border-radius: 0 0 var( --bR ) 0;
			box-shadow: inset 0px -9px 0px 0px rgba(#000,.175);

			&:after { border-bottom: 1px solid rgba(#fff,.45); }
		}
	}

	u {
		position: absolute;
		width: 6px;
		height: 16px;
		z-index: 2;

		&.NW-NE {
			top: -6px;
			right: -6px;
			background: url(~/icons/neg-nw-ne.png) 0px 0px/contain no-repeat;
		}

		&.NE-NW {
			top: -6px;
			left: -6px;
			background: url(~/icons/neg-ne-nw.png) 0px 0px/contain no-repeat;
		}

		&.NE-ES {
			top: -6px;
			left: -2px;
			background: url(~/icons/neg-ne-es.png) 0px 0px/contain no-repeat;
		}

		&.NE-WS {
			top: -4px;
			left: -4px;
			background: url(~/icons/neg-ne-ws.png) 0px 0px/contain no-repeat;
		}
	}
}



@keyframes go-right {
	0%   { transform: scale(1, 1); }
	30%  { transform: scale(.75, 1.1); }
	75%  { transform: scale(1.1, .95); }
	100% { transform: scale(1, 1); }
}

@keyframes go-left {
	0%   { transform: scale(1, 1); }
	30%  { transform: scale(.75, 1.1); }
	75%  { transform: scale(1.1, .95); }
	100% { transform: scale(1, 1); }
}

@keyframes go-up {
	0%   { transform: scale(1, 1); }
	30%  { transform: scale(1.1, .75); }
	75%  { transform: scale(.95, 1.1); }
	100% { transform: scale(1, 1); }
}

@keyframes go-down {
	0%   { transform: scale(1, 1); }
	30%  { transform: scale(1.1, .75); }
	75%  { transform: scale(.95, 1.1); }
	100% { transform: scale(1, 1); }
}


@keyframes vert-left {
	0%    { margin-left: 0; }
	15%   { margin-left: 0; }
	16%   { margin-left: -5px; }
	30%   { margin-left: -5px; }
	31%   { margin-left: 5px; }
	50%   { margin-left: 5px; }
	51%   { margin-left: 0px; }
	78%   { margin-left: 0px; }
	79%   { margin-left: 3px; }
	80%   { margin-left: 3px; }
	100%  { margin-left: 0; }
}

@keyframes vert-right {
	0%    { margin-right: 0; }
	15%   { margin-right: 0; }
	16%   { margin-right: 5px; }
	30%   { margin-right: 5px; }
	31%   { margin-right: -5px; }
	50%   { margin-right: -5px; }
	51%   { margin-right: 0px; }
	78%   { margin-right: 0px; }
	79%   { margin-right: -3px; }
	80%   { margin-right: -3px; }
	100%  { margin-right: 0; }
}

@keyframes hori {
	0%    { transform: translateY(5px); }
	15%   { transform: translateY(5px); }
	16%   { transform: translateY(-3px); }
	30%   { transform: translateY(-3px); }
	31%   { transform: translateY(0px); }
	50%   { transform: translateY(0px); }
	51%   { transform: translateY(0px); }
	78%   { transform: translateY(0px); }
	79%   { transform: translateY(7px); }
	80%   { transform: translateY(7px); }
	100%  { transform: translateY(5px); }
}

@keyframes wink {
	0%   { height: 11px; border-radius: 11px; margin-top: 0; }
	49%  { height: 11px; border-radius: 11px; margin-top: 0; }
	49.1%  { height: 5px; border-radius: 5px; margin-top: 7px; }
	50.9%  { height: 5px; border-radius: 5px; margin-top: 7px; }
	51%  { height: 11px; border-radius: 11px; margin-top: 0; }
	100% { height: 11px; border-radius: 11px; margin-top: 0; }
}
